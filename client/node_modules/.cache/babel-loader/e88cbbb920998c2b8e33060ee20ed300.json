{"ast":null,"code":"var _jsxFileName = \"/home/ashiqa/Desktop/docoverflow/client/src/PostFormModal.js\",\n    _s = $RefreshSig$();\n\nimport ClickOutHandler from 'react-clickout-handler';\nimport { useState, useContext } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Input from \"./Input\";\nimport Textarea from \"./Textarea\";\nimport Button from \"./Button\";\nimport PostFormModalContext from \"./PostFormModalContext\";\nimport AuthModalContext from \"./AuthModalContext\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PostFormModal() {\n  _s();\n\n  const modalContext = useContext(PostFormModalContext);\n  const authModalContext = useContext(AuthModalContext); //visibility of the modal\n\n  const visibleClass = modalContext.show ? 'block' : 'hidden';\n  const [title, setTitle] = useState('');\n  const [body, setBody] = useState('');\n  const [newPostId, setNewPostId] = useState(null); //posts the new query data to the backend to be stored in the database\n\n  function createPost() {\n    const data = {\n      title,\n      body\n    };\n    axios.post('http://localhost:4000/comments', data, {\n      withCredentials: true\n    }).then(response => {\n      setNewPostId(response.data._id);\n    }).catch(error => {\n      console.log(error);\n\n      if (error.response.status === 401) {\n        authModalContext.setShow('login');\n      }\n    });\n  } // If posting is successful, it will redirect to the new post page \n\n\n  if (newPostId) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: '/comments/' + newPostId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this);\n  }\n\n  return (\n    /*#__PURE__*/\n    //Create a new query module\n    _jsxDEV(\"div\", {\n      className: \"w-screen h-screen fixed top-0 left-0 z-20 flex \" + visibleClass,\n      style: {\n        backgroundColor: 'rgba(0,0,0,.8)'\n      },\n      children: /*#__PURE__*/_jsxDEV(ClickOutHandler, {\n        onClickOut: () => {},\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border border-reddit_dark-brightest w-3/4 md:w-2/4 bg-reddit_dark p-5 text-reddit_text self-center mx-auto rounded-md\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-2xl mb-5\",\n            children: \"Create a new query\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            className: 'w-full mb-3',\n            placeholder: 'Title',\n            onChange: e => setTitle(e.target.value),\n            value: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n            className: 'w-full mb-3',\n            placeholder: 'Post text (you can use markdown)',\n            onChange: e => setBody(e.target.value),\n            value: body\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: 'text-right',\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => modalContext.setShow(false),\n              outline: true,\n              className: 'px-4 py-2 mr-3',\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => createPost(),\n              className: 'px-4 py-2',\n              children: \"POST\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }, this)\n  );\n}\n\n_s(PostFormModal, \"XZnK/l1h6csPGeOIYgyvamy0nxk=\");\n\n_c = PostFormModal;\nexport default PostFormModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostFormModal\");","map":{"version":3,"sources":["/home/ashiqa/Desktop/docoverflow/client/src/PostFormModal.js"],"names":["ClickOutHandler","useState","useContext","Redirect","Input","Textarea","Button","PostFormModalContext","AuthModalContext","axios","PostFormModal","modalContext","authModalContext","visibleClass","show","title","setTitle","body","setBody","newPostId","setNewPostId","createPost","data","post","withCredentials","then","response","_id","catch","error","console","log","status","setShow","backgroundColor","e","target","value"],"mappings":"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","sourcesContent":["import ClickOutHandler from 'react-clickout-handler';\nimport {useState,useContext} from 'react';\nimport {Redirect} from 'react-router-dom';\nimport Input from \"./Input\";\nimport Textarea from \"./Textarea\";\nimport Button from \"./Button\";\nimport PostFormModalContext from \"./PostFormModalContext\";\nimport AuthModalContext from \"./AuthModalContext\";\nimport axios from \"axios\";\n\nfunction PostFormModal () {\n\n  const modalContext = useContext(PostFormModalContext);\n  const authModalContext = useContext(AuthModalContext);\n\n  //visibility of the modal\n  const visibleClass = modalContext.show ? 'block' : 'hidden';\n\n  const [title,setTitle] = useState('');\n  const [body,setBody] = useState('');\n  const [newPostId, setNewPostId] = useState(null);\n\n  //posts the new query data to the backend to be stored in the database\n  function createPost() {\n    const data = {title,body};\n    axios.post('http://localhost:4000/comments', data, {withCredentials:true})\n      .then(response => {\n        setNewPostId(response.data._id);\n      })\n      .catch(error => {\n        console.log(error);\n        if (error.response.status === 401) {\n          authModalContext.setShow('login');\n        }\n      });\n  }\n\n  // If posting is successful, it will redirect to the new post page \n  if (newPostId) {\n    return (<Redirect to={'/comments/'+newPostId} />);\n  }\n\n  return (\n\n    //Create a new query module\n    <div\n      className={\"w-screen h-screen fixed top-0 left-0 z-20 flex \"+visibleClass}  style={{backgroundColor:'rgba(0,0,0,.8)'}}>\n      \n      {/*Checks what element has been clicked and its properties */}\n      <ClickOutHandler onClickOut={() => {}  }>\n        <div className=\"border border-reddit_dark-brightest w-3/4 md:w-2/4 bg-reddit_dark p-5 text-reddit_text self-center mx-auto rounded-md\">\n          <h1 className=\"text-2xl mb-5\">Create a new query</h1>\n          \n          {/* Title of the query */}\n          <Input\n            className={'w-full mb-3'}\n            placeholder={'Title'}\n            onChange={e => setTitle(e.target.value)}\n            value={title} />\n\n            {/* Content of the query */}\n          <Textarea\n            className={'w-full mb-3'}\n            placeholder={'Post text (you can use markdown)'}\n            onChange={e => setBody(e.target.value)}\n            value={body} />\n          <div className={'text-right'}>\n            <Button onClick={() => modalContext.setShow(false)}\n                    outline className={'px-4 py-2 mr-3'}>Cancel</Button>\n            <Button onClick={() => createPost()} className={'px-4 py-2'}>POST</Button>\n          </div>\n        </div>\n      </ClickOutHandler>\n    </div>\n  );\n}\n\nexport default PostFormModal;"]},"metadata":{},"sourceType":"module"}